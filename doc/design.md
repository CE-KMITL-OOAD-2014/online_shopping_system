#Group Detail

+ ชื่อกลุ่ม : N&N
+ สมาชิก
 * นาย ณัฏฐ์ จึงมาริศกุล
 * นาย ธนภณ ซู

#Problem Analysis

## Abstraction : 
เนื่องจากเป็นระบบร้านค้าออนไลส์ ที่มีการจัดการสินค้า มีการปฎิสัมพันธ์โต้ตอบระหว่างเจ้าของร้าน และลูกค้า จึงทำการแบ่งส่วน Abstraction ต่างๆได้ดังนี้

####1. สินค้า (Product) ประกอบด้วย
   * ชื่อสินค้า
   * ชนิดสินค้า 
   * 	ราคาสินค้า 
   * รายละเอียดอื่นๆของสินค้า อาทิเช่น ขนาด (Size) และสี 

####2. ลูกค้า (Customer) ประกอบด้วย 
   * 	ชื่อลูกค้า 
   * username ,password 
   * 	ข้อมูลที่อยู่ลูกค้า 
   * การสั่งซื้อ (Order) ประกอบด้วย 
   *	เลขที่การสั่งซื้อ 
   *	รายการสินค้าที่ลูกค้าเลือกซื้อ 
   *	วันที่/เดือน/ปี 
   *	ลูกค้าที่สั่ง 
   *	สถานะการสั่งซื้อ 

#### 3.	ส่วนคำนวณ รายงานการขาย (Report)  
เพื่อวิเคราะห์ ค่าเฉลี่ยรายได้ , รายได้สูงสุด  , สินค้าที่ทำรายได้สูงสุด 

#### จากการวิเคราะห์ Abstraction จึงได้รายการ Component ดังนี้ 
+	ส่วนย่อยเพิ่มสินค้า
+	ส่วนย่อยแก้ไขสินค้า
+	ส่วนย่อยลบสินค้า
+	ส่วนย่อยแสดงสินค้า
+	ส่วนย่อยสมัครสมาชิก
+	ส่วนย่อยแก้ไขข้อมูล
+	ส่วนย่อยเข้าสู่ระบบ
+	ส่วนย่อยสร้างรายการการสั่งซื้อ
+	ส่วนย่อยแก้ไขรายการสั่งซื้อ
+	ส่วนย่อยลบรายการสั่งซื้อ
+	ส่วนย่อยแสดงรายการสั่งซื้อ


  
## Application Architecture

![alt text](https://www.mediafire.com/convkey/ea0d/rqs1ex9au1ifc0j6g.jpg)

####	ส่วนจัดการสินค้า
-	  ส่วนจัดการสินค้ามีหน้าที่จัดการทุกอย่างที่มีส่วนเกี่ยวข้องกับสินค้า เป็นส่วนที่ติดต่อกับฐานข้อมูลสินค้า ซึ่งประกอบด้วยส่วนย่อยดังนี้
   * 	ส่วนย่อยเพิ่มสินค้า
   *	 ส่วนย่อยแก้ไขสินค้า
   *	 ส่วนย่อยลบสินค้า
   *	 ส่วนย่อยแสดงสินค้า

####	ส่วนจัดการผู้ใช้งาน
- ส่วนจัดการผู้ใช้งานมีหน้าที่จัดการทุกอย่างที่เกี่ยวข้องกับผู้ใช้งาน เป็นส่วนที่ติดต่อกับฐานข้อมูลผู้ใช้งาน ซึ่งประกอบด้วยส่วนย่อยดังนี้ 

  *	ส่วนย่อยสมัครสมาชิก
  *	ส่วนย่อยแก้ไขข้อมูล
  *	ส่วนย่อยเข้าสู่ระบบ

####	ส่วนจัดการรายการสั่งซื้อ 
- 	ส่วนจัดการรายการสั่งซื้อมีหน้าที่จัดการทุกอย่างที่เกี่ยวข้องกับผู้ใช้งาน เป็นส่วนที่ติดต่อกับฐานข้อมูลรายการสั่งซื้อ ซึ่งประกอบด้วยส่วนย่อยดังนี้ 

  *	ส่วนย่อยสร้างรายการสั่งซื้อ
  *	ส่วนย่อยแก้ไขรายการสั่งซื้อ
  *	ส่วนย่อยแสดงรายการสั่งซื้อ
  *	ส่วนย่อยลบรายการวั่งซื้อ 

####	ส่วนรายงานผลประกอบการ
- เป็นส่วนที่รายงานผลประกอบการโดยดึงข้อมูลจาก ฐานข้อมูลรายการสั่งซื้อ ฐานข้อมูลผู้ใช้ ฐานข้อมูลสินค้า และนำมาประมวลผลเป็นผลประกอบการตามที่ผู้ใช้ต้องการ 



####	ส่วนจัดการ การซื้อ 
- เป็นส่วนที่มีหน้าที่เพื่อจัดการการซื้อของลูกค้า โดยต้องมีการติดต่อกับ ฐานข้อมูลสินค้า เพื่อดึงข้อมูลสินค้าที่ลูกค้าเลือก และ ฐานข้อมูลรายการสั่งซื้อเพื่อสร้างรายการสั่งซื้อหลังจากลูกค้าทำการยืนยันการสั่งซื้อ
Subsystem / Component

####	ส่วนจัดการสินค้า

  *	ส่วนย่อยเพิ่มสินค้า : เพื่อเพิ่มสินค้าเข้าสู่ระบบ และเก็บลงฐานข้อมูลสินค้า โดยระบบจะตรวจจับห้ามเพิ่มสินค้าที่มีรายละเอียดที่เหมือนสินค้าที่มีอยู่แล้วทุกประการ
  *	ส่วนย่อยแก้ไขสินค้า : เพื่อแก้ไขข้อมูลสินค้า อาทิเช่น ชื่อสินค้า ราคา  และข้อมูลอื่นๆ และเก็บลงฐานข้อมูลสินค้า 
	(การแก้ไขนี้จะไม่ส่งผลต่อ สินค้าที่ยืนยันการสั่งซื้อไปแล้ว ก่อนการเปลี่ยนแปลง)
  *	ส่วนย่อยลบสินค้า : เพื่อลบสินค้าที่ต้องการออกจากฐานข้อมูลสินค้า
  *	ส่วนย่อยแสดงสินค้า : เพื่อดึงรายการสินค้าทั้งหมดที่ต้องหาร หรือรายการสินค้าที่มีเงื่อนไขตรงตามที่กำหนด ออกมาแสดงในส่วนที่ต้องการ 

####	ส่วนจัดการผู้ใช้งาน 
  *	ส่วนย่อยสมัครสมาชิก : เพื่อสร้างผู้ใช้งานคนใหม่ และเก็บลงฐานข้อมูลผู้ใช้งาน
  *	ส่วนย่อยแก้ไขข้อมูล : เพื่อแก้ไขข้อมูลผู้ใช้งาน หากผู้ใช้งานต้องการแก้ไขข้อมูลส่วนตัว อาทิเช่น ผู้ใช้ต้องการแก้ไขที่อยู่ในการส่งสินค้า 
  *	ส่วนย่อยเข้าสู่ระบบ : เพื่อให้ผู้ใช้ยืนยันตัวตน โดยส่วนย่อยนี้จะนำ username และ password ที่ผู้ใช้ป้อนเข้ามาไปตรวจสอบใน ฐานข้อมูลผู้ใช้งาน และมอบสิทธิ์ให้กับผู้ใช้ เพื่อใช้งานส่วนอื่น อาทิเช่น ส่วนจัดการ การซื้อ ที่จำเป็นต้องทำการยืนยันตะวตนเพื่อเข้าสู่ระบบก่อน  

####	ส่วนจัดการรายการสั่งซื้อ (Order)
  *	ส่วนย่อยสร้างรายการการสั่งซื้อ : เพื่อสร้างรายการสั่งซื้อ โดยส่วนนี้จะถูกเรียกโดยส่วนจัดการ การซื้อสินค้า 
  *	ส่วนย่อยแก้ไขรายการสั่งซื้อ : เพื่อให้เจ้าของร้านสามารถเปลี่ยนแปลง รายการสั่งซื้อได้ 
      - หากเจ้าของร้านต้องการเปลี่ยนสถานะรายการสั่งซื้อ เพื่อแสดงถึงสถานะปัจจุบันของสินค้า เช่น เปลี่ยนสถานะจาก ยังไม่ชำระเงินเป็น ชำระเงินแล้ว 
      - เจ้าของร้านต้องการเพิ่มรายละเอียดของ สถานะการสั่งซื้อ เช่น
เจ้าของร้านต้องการ ใส่เลข EMS เพื่อให้ลูกค้าสามารถตามพัสดุสินค้าได้
  *	ส่วนย่อยแสดงรายการสั่งซื้อ : เพื่อดึงข้อมูลรายการการสั่งซื้อของลูกค้าทั้งหมดที่ต้องการ หรือแสดงตามเงื่อนไขตามที่ต้องการ เพื่อไปแสดงผลในส่วนต่างๆของหน้าเว็บ

####	ส่วนจัดการ การซื้อ (buying)
- ส่วนนี้ทำหน้าที่จัดการ การซื้อของลูกค้าทั้งหมด โดยหากลูกค้าทำการซื้อสินค้า ระบบจะทำกระบวนการดังนี้
  *	ระบบจะเข้าไปสร้างรายการสั่งซื้อ ในฐานข้อมูลรายการสั่งซื้อ ( Order ) โดยจะเก็บ 
       - id สินค้าทั้งหมดที่ลูกค้าเลือกซื้อ เพื่อใช้เชื่อมโยงข้อมูลกับฐานข้อมูลสินค้าในภายหลัง
       - เก็บ id ของลูกค้า เพื่อใช้แสดงผลในกรณีลูกค้า ต้องการทราบสินค้าที่ผู้ใช้ซื้อไปทั้งหมด หรือ ใช้เป็นเงื่อนไขในการได้     โปรโมชั่นของลูกค้า ( ระบบโปรโมชั่นไม่ใช่ระบบหลักจึงขอละไว้ ไม่ได้กล่าวถึงในเอกสารนี้ )
       - 	เก็บวันเวลาที่ผู้ใช้ยืนยันการสั่งซื้อ เพื่อใช้ในระบบรายงานผลประกอบการ 
  
*	ระบบจะเข้าไปลดจำนวนสินค้าใน ฐานข้อมูลสินค้า ( Product ) ตัวเลขของจำนวนสินค้านี้ที่เปลี่ยนแปลงไปนี้ จะไปแสดงผลในหน้าเลือกสินค้า ทำให้ลูกค้าทราบถึงจำนวนสินค้าคงเหลือที่แท้จริง

####	ส่วนรายงานผลประกอบการ
- เป็นส่วนที่รายงานผลประกอบการโดยดึงข้อมูลจาก ฐานข้อมูลรายการสั่งซื้อ( Order ) ฐานข้อมูลผู้ใช้ ( User ) ฐานข้อมูลสินค้า ( Product ) และนำมาประมวลผลเป็นผลประกอบการตามที่ผู้ใช้ต้องการ ซึ่งรายงานผลประกอบการจะประกอบด้วย 
  
*	จำนวนสินค้า ที่ขายได้ในหน่วยวัน/สัปดาห์/ปี ต่อระยะเวลาที่ต้องการ  
เช่น จำนวนสินค้าที่ขายได้ในแต่ละวัน ตั้งแต่วันที่ 1 มกราคม ถึง 20 กุมภาพันธ์ 2557  ( เจ้าของร้าน เลือกช่วงเวลาที่ต้องการจากปฎิทินที่ระบบจะแสดงให้เลือก)
  *	รายได้ ที่ทำได้ในหน่วยวัน/สัปดาห์/ปี ต่อระยะเวลาที่ต้องการ 
  *	กำไร ที่ทำได้ในหน่วยวัน/สัปดาห์/ปี ต่อระยะเวลาที่ต้องการ 

![alt text](https://www.mediafire.com/convkey/bbb4/s6pxz0hf31d01z56g.jpg )

* ภาพ sequence diagram แสดงถึงกระบวนการทำงานของการสั่งซื้อสินค้า โดยผู้ใช้งานจะเรียกส่วนจัดการการซื้อ หลังจากนั้นส่วนจัดการการซื้อจะทำการดึง Order สุดท้าย หรือ Order ล่าสุดเพื่อนำมา + 1 และสร้างเป็น id ของ Order ใหม่ เมื่อได้ id แล้วจึงสร้าง Order ใหม่หลังจากนั้นจะเข้าลูป เพื่อกระทำการซื้อกับสินค้าทุกชิ้นในตระกร้า( Cart )ที่ลูกค้ายืนยันการสั่งซื้อมาแล้ว ซึ่งมีขั้นตอนการตรวจสอบว่าสินค้าชนิดที่ลูกค้าต้องการมีหรือไม่ หากมีจะเริ่มทำกระบวนการซื้อ โดยมีการกระทำ 2 อย่างคือ 

 + ไปลดจำนวนสุทธิ ( amount of product ) ของสินค้าชนิดนั้นๆ
 + 	 หากมีโปรโมชั่นจะเข้าไปทำในส่วนโปรโมชั่นเพื่อเปลี่ยนแปลงราคาสินค้านั้นก่อนนำสินค้าเก็บลง Order
 + 	ไปสร้างรายการสั่งซื้อจากสินค้าที่ลูกค้าซื้อ โดยจะเก็บ id ของ Order ใหม่ที่สร้างตอนต้นกระบวนการ กับ id สินค้าชนิดนั้น

![alt text](http://www.mediafire.com/convkey/6476/shwvhkk0kieezv26g.jpg)

* ภาพ sequence diagram แสดงถึงกระบวนการเรียกผลประกอบ ผู้ใช้จะส่งไปที่ส่วนรายงานผลโดยส่งค่าไปด้วยอีก 2 ตัวประกอบด้วย หน่วย ที่จะบ่งบอกว่าต้องการแสดงผลในหน่วย วันหรือ เดือนหรือปี ตัวต่อมาคือ ชนิดการแสดงผล เพื่อบ่งบอกว่าต้องการให้แสดงผลอะไร อาทิเช่น จำนวนสินค้าที่ขายได้ในหน่อยเวลานั้นๆ  ,รายได้ และอื่นๆ หลังจากนั้น ส่วน Order ซึ่งเป็นส่วน data-mapper กับฐานข้อมูล ระบบจะส่งชุดข้อมูลของ Order กลับมา หลังจากที่ส่วนรายงานผลได้รับ ชุดข้อมูลของ Order แล้วก็จะไปคำนวณเป็นผลรวมของสิ่งที่ผู้ใช้ต้องการ เช่น ผลรวมของรายได้ที่เก็บใน Order ที่มีวันที่เดียวกัน หลังจากนั้นจะนำไปพล็อตกราฟเพื่อแสดงผล

## Class Diagram 

![alt text](https://www.mediafire.com/convkey/e8f6/yxe2oimmntgd8da6g.jpg)

## Deployment 

- VM ติดตั้งระบบปฏิบัติการ Ubuntu 14.04 LTS 
- Apache web server 
- PHP5.5 
- MySQL5.5 
- Laravel PHP web application framework ทำหน้าที่รับ request จาก browser และเรียกใช้ core ของ application 
- Bootstrap framework สำหรับการพัฒนาส่วน front end - PHPUnit testing framework สำหรับการทำ unit test

## Timeline

![alt text](http://www.mediafire.com/convkey/2172/rrg49f6veabxjhc6g.jpg)

![alt text](https://www.mediafire.com/convkey/2172/rrg49f6veabxjhc6g.jpg)
